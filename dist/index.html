<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./styles.css">

    <style>
        * {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
        }

        html, body {
          height: 100%;
        }

        body {
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }

        main {
          height: 100%;
          display: flex;
          flex-direction: column;
          justify-content: center;
        }

        .row {
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .row button {
          margin: .5em;
          padding: .25em;
        }
    </style>
</head>
<body>
    <main>
        <div class="row">
            <button type="button" class="js-showDialog" data-template="popup">Show popup dialog</button>
            <button type="button" class="js-showDialog" data-template="banner">Show banner dialog</button>
            <button type="button" class="js-showDialog" data-template="overlay">Show overlay dialog</button>
        </div>

        <div class="row">
            <button type="button" class="js-hideDialog">Hide dialog</button>
        </div>
    </main>

    <script src="./main.js"></script>

    <script>

        function initCookieConsent(template = 'overlay') {
            return window.CookieConsent({
                template: template,       // Can be `banner` (floating on top or bottom) or `popup` (floating on left or right side  of the screen) or `overlay` (centered in the middle of the page)
                position: 'left',         // Can be `top` or `bottom` for banner layout, `left` or `right` for popup layout
                collapsible: true,

                type: 'checkbox',         // Can be `checkbox` or `radio`.
                prefix: 'cookie-consent', // The prefix used for styling and identifiers.
                append: true,             // By default the dialog is appended before the `main` tag or
                                          // as the first `body` child. Disable to append it yourself.
                appendDelay: 500,         // The delay after which the cookie consent should be appended.
                acceptAllButton: false,   // Nudge users to accept all cookies when nothing is selected.
                                          // Will select all checkboxes, or the top radio button.
                cookies: [                // Array with cookie types.
                    {
                        id: 'marketing',      // The unique identifier of the cookie type.
                        label: 'Marketing',   // The label used in the dialog.
                        description: 'Some description',   // The description used in the dialog.
                        required: false,      // Mark a cookie required (ignored when type is `radio`).
                        checked: false,       // The default checked state (only valid when not `required`).
                        collapsible: true
                    },
                ],
                // Labels to provide content for the dialog.
                labels: {
                    title: 'Cookies & Privacy',
                    description: `<p>This site makes use of third-party cookies. Read more in our <a href="/privacy-policy">privacy policy</a>.</p>`,

                    policyLink: {
                        href: '#',
                        text: 'More info'
                    },
                    // Button labels based on state and preferences.
                    button: {
                        // The default button label.
                        default: 'Save preferences',
                        // Shown when `acceptAllButton` is set, and no option is selected.
                        acceptAll: 'Accept all',
                    },
                    // ARIA labels to improve accessibility.
                    aria: {
                        button: 'Confirm cookie settings',
                        tabList: 'List with cookie types',
                        tabToggle: 'Toggle cookie tab',
                    },
                },
            });
        }

        let cookieConsent = initCookieConsent();
        cookieConsent.showDialog();

        let buttons = document.querySelectorAll('.js-showDialog');

        for (let i = 0; i < buttons.length; i++) {
            buttons[i].addEventListener('click', function(e) {
                e.preventDefault();
                if (cookieConsent) {
                    cookieConsent.getDialog().remove()
                    cookieConsent = null;
                }
                cookieConsent = initCookieConsent(buttons[i].dataset.template);
                cookieConsent.showDialog();
            }, false);
        }

        document.querySelector('.js-hideDialog').addEventListener('click', e => {
            e.preventDefault();
            cookieConsent.hideDialog();
        });

    </script>

</body>
</html>