(()=>{"use strict";const e={type:"checkbox",prefix:"cookie-consent",append:!0,appendDelay:500,acceptAllButton:!1,labels:{title:"Cookies & Privacy",description:'<p>This site makes use of third-party cookies. Read more in our <a href="/privacy-policy">privacy policy</a>.</p>',button:{default:"Save preferences",acceptAll:"Accept all"},aria:{button:"Confirm cookie settings",tabList:"List with cookie types",tabToggle:"Toggle cookie tab"}}},t=(e,t)=>t.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").reduce(((e,t)=>{if(e&&t in e)return e[t]}),e),a=e=>{const t=document.createElement("div");return t.innerHTML=e,t.children.length?t.firstElementChild:void 0},n=()=>{const e={},t={},a=(a,n)=>{e[a]?e[a].forEach((e=>e(n))):t[a]=[...t[a]||[],n]};return{add:(n,r)=>{e[n]=[...e[n]||[],r],t[n]&&(t[n].forEach((e=>a(n,e))),delete t[n])},dispatch:a,listeners:e}},r=({config:e,preferences:t})=>{const r=(({config:e,preferences:t})=>{const r=n(),i=e.get("type"),o=e.get("prefix"),c=({id:t,label:a,description:n,required:r,checked:c,accepted:l},s)=>`\n      <li role="presentation">\n        <header class="${o}__tab">\n          <label class="${o}__option" data-required="${r}">\n            <input type="${"radio"===i?"radio":"checkbox"}" name="${o}-input" value="${t}" ${(void 0!==l?l:!0===r?r:c)?"checked":""} ${r&&"radio"!==i?"disabled":""}>\n            <span>${a}</span>\n          </label>\n          <a\n            class="${o}__tab-toggle"\n            role="tab"\n            id="${o}-tab-${s}"\n            href="#${o}-tabpanel-${s}"\n            aria-controls="${o}-tabpanel-${s}"\n            aria-selected="false"\n            aria-label="${e.get("labels.aria.tabToggle")}">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 16"><path d="M21.5.5l3 3.057-12 11.943L.5 3.557 3.5.5l9 9z"/></svg>\n          </a>\n        </header>\n        <div\n          class="${o}__tab-panel"\n          role="tabpanel"\n          id="${o}-tabpanel-${s}"\n          aria-labelledby="${o}-tab-${s}"\n          aria-hidden="true">\n          <div class="${o}__tab-description">\n            ${n}\n          </div>\n        </div>\n      </li>\n    `,l=a((()=>{const a=(e.get("cookies",!0)||[]).map((e=>({...e,accepted:t.get(e.id)?t.get(e.id).accepted:void 0})));return`\n      <ul class="${o}__tab-list" role="tablist" aria-label="${e.get("labels.aria.tabList")}">\n        ${a.map(c).join("")}\n      </ul>\n    `})());return{init(){(()=>{const e=[...l.querySelectorAll('[role="tab"]')],t=[...l.querySelectorAll('[role="tabpanel"]')];e.forEach((a=>{a.addEventListener("click",(n=>{n.preventDefault();const r="true"===a.getAttribute("aria-selected")?null:a;(({tabs:e,panels:t,targetTab:a})=>{const n=a?a.getAttribute("aria-controls"):"";e.forEach((e=>e.setAttribute("aria-selected",e===a))),t.forEach((e=>e.setAttribute("aria-hidden",n!==e.id)))})({tabs:e,panels:t,targetTab:r})}))}))})()},on:r.add,element:l,getValues:()=>[...l.querySelectorAll("input")].map((e=>({id:e.value,accepted:e.checked})))}})({config:e,preferences:t}),i=n(),o=e.get("type"),c=e.get("prefix"),l=e.get("acceptAllButton")&&!t.hasPreferences(),s=a(`\n      <aside id="${c}" class="${c} js-cookie-bar" role="dialog" aria-live="polite" aria-describedby="${c}-description" aria-hidden="true" tabindex="0">\n        \x3c!--googleoff: all--\x3e\n        <header class="${c}__header" id="${c}-description">\n          <h1>${e.get("labels.title")}</h1>\n          ${e.get("labels.description")}\n        </header>\n        <form>\n          <button class="${c}__button" aria-label="${e.get("labels.aria.button")}">\n            <span>${e.get("labels.button.default")}</span>\n          </button>\n        </form>\n        \x3c!--googleon: all--\x3e\n      </aside>\n    `),d=s.querySelector("form"),p=d.querySelector("button"),u=()=>s.setAttribute("aria-hidden","true"),g=t=>{t.preventDefault();const a=(t=>{if("radio"===o&&!t.find((e=>e.accepted)))return l?(t[0].accepted=!0,t):[];const a=e.get("cookies").filter((e=>e.required)).length,n=t.filter((e=>e.accepted)).length;return!l||"checkbox"!==o||n>a?t:t.map((e=>({...e,accepted:!0})))})(r.getValues());a&&(i.dispatch("submit",a),u())},b=e=>{p.textContent=e};return{init(){r.init(),d.insertBefore(r.element,d.firstElementChild),d.addEventListener("submit",g),l&&(b(e.get("labels.button.acceptAll")),d.addEventListener("change",(t=>{b(e.get("labels.button.default"))})))},on:i.add,show:()=>s.setAttribute("aria-hidden","false"),hide:u,element:s}},i=e=>{const t=e=>{e.style.display="",e.removeAttribute("aria-hidden"),e.removeAttribute("hidden")},a=e=>{e.style.display="none",e.setAttribute("aria-hidden","true")};return{toggle:n=>{(e.get("cookies")||[]).forEach((e=>{const r=n.getState(e.id);(({id:e,accepted:t})=>{t&&[...document.documentElement.querySelectorAll(`script[data-cookie-consent="${e}"]`)].forEach((e=>{(e=>{const t=document.createElement("script");e.src?t.src=e.src:t.innerHTML=e.innerHTML,document.head.appendChild(t)})(e),e.parentNode.removeChild(e)}))})({id:e.id,accepted:r}),(({id:e,accepted:n})=>{const r=document.body.querySelectorAll(`[data-cookie-consent-accepted="${e}"]`),i=document.body.querySelectorAll(`[data-cookie-consent-rejected="${e}"]`);[...r].forEach((e=>n?t(e):a(e))),[...i].forEach((e=>n?a(e):t(e)))})({id:e.id,accepted:r}),(({id:e,accepted:t})=>{[...document.body.querySelectorAll(`iframe[data-cookie-consent="${e}"]`)].forEach((e=>t?(e=>{const t=e.getAttribute("data-src");t&&(e.setAttribute("src",t),e.removeAttribute("data-src"))})(e):(e=>{const t=e.getAttribute("src");t&&(e.setAttribute("data-src",t),e.removeAttribute("src"))})(e)))})({id:e.id,accepted:r})}))}}},o=()=>{const e=(()=>{const e="localstorage-test-key";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})()?window.localStorage:{attributes:{},setItem(e,t){this.attributes[e]=t},getItem(e){return this.attributes[e]}};return{get:(t,a)=>e.getItem(t,a),set:(t,a)=>e.setItem(t,a),has:t=>null!==e.getItem(t)}};window.CookieConsent=a=>{"object"==typeof a&&Object.keys(a).length||console.warn("No settings specified.");const c=(a=>({get:(n,r=!1)=>{const i=t(a,n);if(i||!r)return void 0===i?t(e,n):i;console.warn(`Required setting '${n}' is missing.`)}}))(a),l=(e=>{const t=`${e}-preferences`,a=o(),n=()=>JSON.parse(a.get(t))||[],r=e=>n().find((t=>t.id===e));return{get:r,getAll:n,getState:e=>r(e)&&r(e).accepted,hasPreferences:()=>a.has(t)&&n().length,store:(e=[])=>a.set(t,JSON.stringify(e))}})(c.get("prefix")),s=r({config:c,preferences:l}),d=i(c),p=n();if(d.toggle(l),s.init(),s.on("submit",(e=>{l.store(e),p.dispatch("update",l.getAll()),d.toggle(l)})),!1!==c.get("append")){const e=document.querySelector("main")||document.body.firstElementChild;document.body.insertBefore(s.element,e)}return l.hasPreferences()?p.dispatch("update",l.getAll()):window.setTimeout((()=>s.show()),c.get("appendDelay")),{getDialog:()=>s.element,hideDialog:s.hide,showDialog:s.show,isAccepted:l.getState,getPreferences:l.getAll,on:p.add}}})();