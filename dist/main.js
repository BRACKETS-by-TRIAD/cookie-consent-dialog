(()=>{"use strict";const e={layout:"popup",position:"right",type:"checkbox",prefix:"cookie-consent",append:!0,appendDelay:500,acceptAllButton:!1,labels:{title:"Cookies & Privacy",description:'<p>This site makes use of third-party cookies. Read more in our <a href="/privacy-policy">privacy policy</a>.</p>',policyLink:{href:null,text:"More info"},settingsLink:{text:"Edit settings"},button:{default:"Save preferences",acceptAll:"Accept all"},aria:{button:"Confirm cookie settings",tabList:"List with cookie types",tabToggle:"Toggle cookie tab"}}},t=(e,t)=>t.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").reduce(((e,t)=>{if(e&&t in e)return e[t]}),e),n=e=>{const t=document.createElement("div");return t.innerHTML=e,t.children.length?t.firstElementChild:void 0},a=()=>{const e={},t={},n=(n,a)=>{e[n]?e[n].forEach((e=>e(a))):t[n]=[...t[n]||[],a]};return{add:(a,i)=>{e[a]=[...e[a]||[],i],t[a]&&(t[a].forEach((e=>n(a,e))),delete t[a])},dispatch:n,listeners:e}},i=({config:e,preferences:t})=>{const i=(({config:e,preferences:t})=>{const i=a(),r=e.get("type"),l=e.get("prefix"),o=({id:t,label:n,description:a,required:i,checked:o,collapsible:s,accepted:c},d)=>{const p=void 0!==c?c:!0===i?i:o;return s?`\n      <li role="presentation">\n        <header class="${l}__tab">\n          <label class="${l}__option" data-required="${i}">\n            <input type="${"radio"===r?"radio":"checkbox"}" name="${l}-input" value="${t}" ${p?"checked":""} ${i&&"radio"!==r?"disabled":""}>\n            <span>${n}</span>\n          </label>\n          <a\n            class="${l}__tab-toggle"\n            role="tab"\n            id="${l}-tab-${d}"\n            href="#${l}-tabpanel-${d}"\n            aria-controls="${l}-tabpanel-${d}"\n            aria-selected="false"\n            aria-label="${e.get("labels.aria.tabToggle")}">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 16"><path d="M21.5.5l3 3.057-12 11.943L.5 3.557 3.5.5l9 9z"/></svg>\n          </a>\n        </header>\n        <div\n          class="${l}__tab-panel"\n          role="tabpanel"\n          id="${l}-tabpanel-${d}"\n          aria-labelledby="${l}-tab-${d}"\n          aria-hidden="true">\n          <div class="${l}__tab-description">\n            ${a}\n          </div>\n        </div>\n      </li>\n    `:`\n        <li role="presentation">\n        <header class="${l}__tab">\n          <label class="${l}__option" data-required="${i}">\n            <input type="${"radio"===r?"radio":"checkbox"}" name="${l}-input" value="${t}" ${p?"checked":""} ${i&&"radio"!==r?"disabled":""}>\n            <span>\n              ${n} <br>\n              <small>\n                  ${a}\n              </small>\n            </span>\n          </label>\n        </header>\n        <div\n          class="${l}__tab-panel"\n          role="tabpanel"\n          id="${l}-tabpanel-${d}"\n          aria-labelledby="${l}-tab-${d}"\n          aria-hidden="true">\n          <div class="${l}__tab-description">\n            ${a}\n          </div>\n        </div>\n      </li>\n      `},s=n((()=>{const n=(e.get("cookies",!0)||[]).map((e=>({...e,accepted:t.get(e.id)?t.get(e.id).accepted:void 0})));return`\n      <ul class="${l}__tab-list" role="tablist" aria-label="${e.get("labels.aria.tabList")}">\n        ${n.map(o).join("")}\n      </ul>\n    `})());return{init(){(()=>{const e=[...s.querySelectorAll('[role="tab"]')],t=[...s.querySelectorAll('[role="tabpanel"]')];e.forEach((n=>{n.addEventListener("click",(a=>{a.preventDefault();const i="true"===n.getAttribute("aria-selected")?null:n;(({tabs:e,panels:t,targetTab:n})=>{const a=n?n.getAttribute("aria-controls"):"";e.forEach((e=>e.setAttribute("aria-selected",e===n))),t.forEach((e=>e.setAttribute("aria-hidden",a!==e.id)))})({tabs:e,panels:t,targetTab:i})}))}))})()},on:i.add,element:s,getValues:()=>[...s.querySelectorAll("input")].map((e=>({id:e.value,accepted:e.checked})))}})({config:e,preferences:t}),r=a(),l=e.get("template"),o=e.get("position"),s=e.get("type"),c=e.get("prefix"),d=e.get("acceptAllButton")&&!t.hasPreferences(),p=n((()=>{let t="";"banner"===l?t=`${c}--banner ${c}--${"top"===o?"top":"bottom"}`:"overlay"===l?t=`${c}--overlay`:"popup"===l&&(t=`${c}--popup ${c}--${"left"===o?"left":"right"}`);let n=e.get("labels.policyLink.href")?`<a href="${e.get("labels.policyLink.href")}" target="_blank">${e.get("labels.policyLink.text")}</a>`:"",a=e.get("collapsible")?`<a id="${c}-settings" href="javascript:void(0);">${e.get("labels.settingsLink.text")}</a>`:"";return`\n      <aside id="${c}" class="${c} ${t} js-cookie-bar" role="dialog" aria-live="polite" aria-describedby="${c}-description" aria-hidden="true" tabindex="0">\n        \x3c!--googleoff: all--\x3e\n        <div class="${c}__inner">\n          <form>\n            <header class="${c}__header" id="${c}-description">\n              <h1>${e.get("labels.title")}</h1>\n              ${e.get("labels.description")}\n              <div class="${c}__links">\n                  ${n}\n                  ${a}\n              </div>\n            </header>\n              \n            <button class="${c}__button" aria-label="${e.get("labels.aria.button")}">\n              <span>${e.get("labels.button.default")}</span>\n            </button>\n          </form>\n        </div>\n        \x3c!--googleon: all--\x3e\n      </aside>\n    `})()),u=p.querySelector("form"),b=u.querySelector("button"),g=p.querySelector(`#${c}-settings`),h=()=>p.setAttribute("aria-hidden","true"),$=t=>{t.preventDefault();const n=(t=>{if("radio"===s&&!t.find((e=>e.accepted)))return d?(t[0].accepted=!0,t):[];const n=e.get("cookies").filter((e=>e.required)).length,a=t.filter((e=>e.accepted)).length;return!d||"checkbox"!==s||a>n?t:t.map((e=>({...e,accepted:!0})))})(i.getValues());n&&(r.dispatch("submit",n),h())},f=e=>{b.textContent=e};return{init(){i.init(),u.insertBefore(i.element,u.lastElementChild),u.addEventListener("submit",$),d&&(f(e.get("labels.button.acceptAll")),u.addEventListener("change",(t=>{f(e.get("labels.button.default"))}))),g&&(i.element.classList.add("hidden"),g.addEventListener("click",(function(e){e.preventDefault(),i.element.classList.toggle("hidden"),i.element.classList.toggle("visible")})))},on:r.add,show:()=>p.setAttribute("aria-hidden","false"),hide:h,element:p}},r=e=>{const t=e=>{e.style.display="",e.removeAttribute("aria-hidden"),e.removeAttribute("hidden")},n=e=>{e.style.display="none",e.setAttribute("aria-hidden","true")};return{toggle:a=>{(e.get("cookies")||[]).forEach((e=>{const i=a.getState(e.id);(({id:e,accepted:t})=>{t&&[...document.documentElement.querySelectorAll(`script[data-cookie-consent="${e}"]`)].forEach((e=>{(e=>{const t=document.createElement("script");e.src?t.src=e.src:t.innerHTML=e.innerHTML,document.head.appendChild(t)})(e),e.parentNode.removeChild(e)}))})({id:e.id,accepted:i}),(({id:e,accepted:a})=>{const i=document.body.querySelectorAll(`[data-cookie-consent-accepted="${e}"]`),r=document.body.querySelectorAll(`[data-cookie-consent-rejected="${e}"]`);[...i].forEach((e=>a?t(e):n(e))),[...r].forEach((e=>a?n(e):t(e)))})({id:e.id,accepted:i}),(({id:e,accepted:t})=>{[...document.body.querySelectorAll(`iframe[data-cookie-consent="${e}"]`)].forEach((e=>t?(e=>{const t=e.getAttribute("data-src");t&&(e.setAttribute("src",t),e.removeAttribute("data-src"))})(e):(e=>{const t=e.getAttribute("src");t&&(e.setAttribute("data-src",t),e.removeAttribute("src"))})(e)))})({id:e.id,accepted:i})}))}}},l=()=>{const e=(()=>{const e="localstorage-test-key";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})()?window.localStorage:{attributes:{},setItem(e,t){this.attributes[e]=t},getItem(e){return this.attributes[e]}};return{get:(t,n)=>e.getItem(t,n),set:(t,n)=>e.setItem(t,n),has:t=>null!==e.getItem(t)}};window.CookieConsent=n=>{"object"==typeof n&&Object.keys(n).length||console.warn("No settings specified.");const o=(n=>({get:(a,i=!1)=>{const r=t(n,a);if(r||!i)return void 0===r?t(e,a):r;console.warn(`Required setting '${a}' is missing.`)}}))(n),s=(e=>{const t=`${e}-preferences`,n=l(),a=()=>JSON.parse(n.get(t))||[],i=e=>a().find((t=>t.id===e));return{get:i,getAll:a,getState:e=>i(e)&&i(e).accepted,hasPreferences:()=>n.has(t)&&a().length,store:(e=[])=>n.set(t,JSON.stringify(e))}})(o.get("prefix")),c=i({config:o,preferences:s}),d=r(o),p=a();if(d.toggle(s),c.init(),c.on("submit",(e=>{s.store(e),p.dispatch("update",s.getAll()),d.toggle(s)})),!1!==o.get("append")){const e=document.querySelector("main")||document.body.firstElementChild;document.body.insertBefore(c.element,e)}return s.hasPreferences()?p.dispatch("update",s.getAll()):window.setTimeout((()=>c.show()),o.get("appendDelay")),{getDialog:()=>c.element,hideDialog:c.hide,showDialog:c.show,isAccepted:s.getState,getPreferences:s.getAll,on:p.add}}})();